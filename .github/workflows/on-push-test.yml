name: markdown-link-check
on:
  push:
jobs:
  markdown-link-check:
    name: Check markdown files
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Markdown links check
        uses: ruzickap/action-my-markdown-link-checker@v1
  run-if-failed:
    runs-on: ubuntu-latest
    needs: [markdown-link-check]
    if: always() && (needs.markdown-link-check.result == 'failure')
    steps:
      # google chat
      - name: Post Google Chat message
        uses: julb/action-post-googlechat-message@v1
        with:
          message: "Markdown checker failed!"
          gchat_webhook_url: ${{ secrets.GCHAT_WEBHOOK_URL }}